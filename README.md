# douban

最近需要做一个通过isbn查询图书信息的功能,在网上翻一圈,发现要么是查询返回的字段信息太少,要么就是要钱,或者就是请求有限制(豆瓣对外的api服务关闭了),所以就自己写一个吧.目前能支持的字段基本都支持了.你可以在自己的服务器上搭建,用于增量数据的更新.


## ISBN图书查询

![](https://pic3.zhimg.com/v2-bc4fbc0dde688aaff9bf898a4b58b3b7_1200x500.jpg)
 
 
#### 安装

建议使用**docker**安装

拉取镜像
```
docker pull registry.cn-chengdu.aliyuncs.com/book/douban:0.0.3
```

运行
```
docker run --rm -d -p 10086:10086/tcp registry.cn-chengdu.aliyuncs.com/book/douban:0.0.3
```

#### 关于更新
目前只支持grpc调用,后期考虑加入http服务
  

#### ISBN图书查询接口说明

由于采用了grpc提供服务,所以你要自己编写客户端来实现查询,协议文件是/pb/request.proto


#### 字段说明

协议文件 /pb/request.proto 中对字段做了注释,可以前往查看

#### 返回结果示例

```json
{
  "tags": [
    "日本",
    "传记",
    "历史",
    "我想读这本书",
    "小说",
    "人性",
    "经典",
    "文学"
  ],
  "where_to_buy": [
    "https://book.douban.com/link2/?lowest=31039&pre=0&vendor=jingdong&srcpage=subject&price=37810&pos=1&url=https%3A%2F%2Funion-click.jd.com%2Fjdc%3Fe%3D%26p%3DAyIGZRtYFAcXBFIZWR0yEgRTGF4QAhc3EUQDS10iXhBeGlcJDBkNXg9JHUlSSkkFSRwSBFMYXhACFxgMXgdIMlVkV1gjFQJNYh1PC2NyVng3HiJ8amILWStcEAUUAFwYXCUCFgZRH2slAhM3B3WDo7TKouQHj7%252BNx4%252FCK1olAhYBVxNYFwoRAVwfXCUCGgNlwtui1LCVjIXRwIqFN2UrWCUyIgdlG2tKRk9aZRlaFAAQ&cntvendor=2&srcsubj=33427955&type=bkbuy&subject=33427955",
    "https://book.douban.com/link2/?lowest=31039&pre=0&vendor=bookschina&srcpage=subject&price=31039&pos=2&url=http%3A%2F%2Fwww.bookschina.com%2Funion%2Fubook.asp%3Fadservice%3D354872%26tourl%3Dhttp%3A%2F%2Fwww.bookschina.com%2F8213319.htm&cntvendor=2&link2key=1ba9a51c8a&srcsubj=33427955&type=bkbuy&subject=33427955"
  ],
  "recommend": [
    "香料漂流记",
    "法国大革命",
    "隐页书城（三部曲）",
    "气候改变世界",
    "黑色天鹅",
    "1683维也纳之战",
    "DK医学史",
    "狐媚记",
    "世界就是这样结束的",
    "西北雨"
  ],
  "info": {
    "title": "宫本武藏全传",
    "sub_title": "全五册",
    "isbn": "9787545548372",
    "translator": "冯莹莹",
    "image": "https://img3.doubanio.com/view/subject/l/public/s33509783.jpg",
    "author": "[日]吉川英治",
    "origin_author": "",
    "publisher": "天地出版社",
    "publish_at": "2019-11",
    "page_num": "",
    "price": "398.00元",
    "binding": "",
    "producer": "",
    "score": "9.0",
    "series": ""
  },
  "about_author": "吉川英治</br>日本大众文学泰斗，日本著名小说家。每日艺术奖、朝日文化奖、菊池宽奖得主，因卓越贡献被授予文化勋章。在日本能与吉川比肩的，唯夏目漱石一人，有为了纪念他而设立的“吉川英治文学奖”。其耗费二十年心血写成的传世代表作《宫本武藏》，确立了吉川英治的\"国民作家\"地位。《宫本武藏》还被翻译成中、英、德、法、意等各国文字。仅在台湾省，前后就出现过五种不同的译本，始终畅销不歇。他创作的《宫本武藏》《丰臣秀吉：新书太阁记》《三国》《新平家物语》等多部巨作，是日本家喻户晓的经典。</br>小山胜清</br>日本著名作家。《宫本武藏》为其代表作。与吉川英治的《宫本武藏》一起成为畅销不衰的经典，号称日本历史武侠的双璧。",
  "brief_introduction": "日本历史武侠双璧吉川英治、小山胜清《宫本武藏全传》中文简体版初次完整出版；全五册礼盒精装典藏未删节权威全译版，随书附赠宫本武藏霸气海报；古龙、金庸推崇备至的武侠大成之作；柏杨、星云大师、南怀瑾眼中的禅意励志人生。</br>宫本武藏，日本家喻户晓的传奇人物。日本战国时代末期至江户时代初期的剑术家、兵法家、艺术家。在日本人心中，宫本武藏是强者，是智者，是哲人，是武术家，是永远的胜者。一直以来我们只读了《宫本武藏》的二分之一。吉川英治的《宫本武藏》其实只是《宫本武藏全传》的前传，小山胜清的《宫本武藏》是它的后传，只有阅读完整的《宫本武藏全传》，才能读懂真正的宫本武藏。本书共五册，十三卷描述了剑圣宫本武藏完整一生的生命传奇，揭秘日本民族的心灵密码与文化精神，唤醒敏感、浮躁、柔弱的现代人，找回人类所拥有的强韧的精神面貌、梦想和真挚的人生追求。是现代人磨炼人生、挑战自我...</br>(展开全部)</br>日本历史武侠双璧吉川英治、小山胜清《宫本武藏全传》中文简体版初次完整出版；全五册礼盒精装典藏未删节权威全译版，随书附赠宫本武藏霸气海报；古龙、金庸推崇备至的武侠大成之作；柏杨、星云大师、南怀瑾眼中的禅意励志人生。</br>宫本武藏，日本家喻户晓的传奇人物。日本战国时代末期至江户时代初期的剑术家、兵法家、艺术家。在日本人心中，宫本武藏是强者，是智者，是哲人，是武术家，是永远的胜者。一直以来我们只读了《宫本武藏》的二分之一。吉川英治的《宫本武藏》其实只是《宫本武藏全传》的前传，小山胜清的《宫本武藏》是它的后传，只有阅读完整的《宫本武藏全传》，才能读懂真正的宫本武藏。本书共五册，十三卷描述了剑圣宫本武藏完整一生的生命传奇，揭秘日本民族的心灵密码与文化精神，唤醒敏感、浮躁、柔弱的现代人，找回人类所拥有的强韧的精神面貌、梦想和真挚的人生追求。是现代人磨炼人生、挑战自我、超越困境的必读书。</br>日本历史武侠双璧吉川英治+小山胜清《宫本武藏全传》中文简体版初次完整出版</br>全五册精装典藏未删节权威全译版，礼盒盛装惊喜上市，随书附赠宫本武藏霸气海报</br>以宫本武藏为蓝本的各类影视剧、舞台剧、游戏、动漫、音乐、文学作品超过一百种，对日本社会和文化影响深远</br>畅销70余年，全球销量过亿</br>深深影响20世纪你我耳熟能详的作家、艺术家、武道家；撼动时代的精英，感动无数位生命奋斗的追随者</br>古龙、金庸推崇备至的武侠大成之作；柏杨、星云大师眼中的禅意励志人生</br>《出版人周刊》《华盛顿邮报》《费城公报》等鼎力推荐",
  "directory": "地之卷</br>        铃</br>        毒蘑菇</br>        丢落的梳子</br>        花佛堂</br>        农田里的人们</br>        荆棘</br>        孙子</br>        受绑之笛</br>        千年杉树</br>        树石问答</br>        三日月茶馆</br>        软弱的武藏</br>        光明藏</br>        花田桥</br>        水之卷</br>        吉冈染</br>        日之蚀·日之影</br>        优昙华</br>        山坡</br>        可童</br>        春的消息</br>        不期而遇</br>        茶泡饭</br>        借宿奈良</br>        般若原</br>        山中小国</br>        芍药使者</br>        四高徒</br>        团坐宴</br>        太郎</br>        怒火</br>        黄莺</br>        女人的抉择</br>        火之卷</br>        西瓜</br>        佐佐木小次郎</br>        狐狸足印</br>        幻术</br>        宿敌</br>        美少年</br>        忘忧贝</br>        无常</br>        旧时盟约</br>        晒衣竿</br>        无限江山</br>        神泉</br>        冬日幻像</br>        风车</br>        受惊之马</br>        冬之蝶</br>        心之猿</br>        公开信</br>        孤行八寒</br>        针</br>        微笑</br>        鱼纹</br>        风之卷</br>        无边荒野</br>        当世高手</br>        黑夜迷途</br>        真假佐佐木小次郎</br>        二少爷</br>        死胡同</br>        慈母悲心</br>        锄头</br>        城里的商人</br>        春雪</br>        雪韵</br>        今样六歌仙</br>        焚牡丹</br>        断弦</br>        悲春之人</br>        沉香君</br>        门</br>        今朝有酒今朝醉</br>        必杀之地</br>        一弯新月</br>        山神</br>        离散之雁</br>        生死一线</br>        雾风</br>        菩提一刀</br>        乳</br>        蝶与风</br>        道听途说</br>        连理枝</br>        送春谱</br>        女瀑男瀑</br>        空之卷</br>        普贤</br>        木曾冠者</br>        毒齿</br>        星之中</br>        慈母棍</br>        一夜之友</br>        钱</br>        焚虫</br>        前往江户的妓女</br>        恶作剧</br>        草云雀</br>        开拓者</br>        喧嚣河滩</br>        刨花</br>        猫头鹰</br>        守灵的童子</br>        一指擎天</br>        老师与弟子</br>        土匪来</br>        征夷</br>        卯月之时</br>        入府城</br>        苍蝇</br>        促膝长谈</br>        食客</br>        承办人</br>        急信</br>        假名书写的佛经</br>        血色梅雨</br>        心无旁骛</br>        雀罗之门</br>        街上的杂草</br>        二天之卷</br>        众口</br>        虫鸣不断</br>        鹫</br>        青柿</br>        露水湿淋淋</br>        四贤一灯</br>        槐之门</br>        皂荚坡</br>        忠明发疯始末</br>        物哀</br>        鼓槌</br>        恶魔的眷属</br>        篱笆红叶</br>        下行货物</br>        漆桶</br>        兄弟弟子</br>        大事</br>        石榴之伤</br>        梦土</br>        花落·花开</br>        师徒重遇记</br>        荣达之门</br>        天音</br>        圆明之卷</br>        黄莺</br>        奔牛</br>        麻胚</br>        尘埃</br>        童心</br>        大日</br>        古今逍遥</br>        绳子</br>        丝雨之春</br>        港口</br>        热开水</br>        无可先生</br>        无为之躯</br>        空心麻线球</br>        圆</br>        饰磨染</br>        风信</br>        观音</br>        世之海流</br>        待宵舟</br>        鹰与女人</br>        十三日前</br>        马草鞋</br>        日出时分</br>        彼人·此人</br>        鱼歌水心</br>        波浪之卷</br>        展翅</br>        波澜</br>        旋踵</br>        首途</br>        分道扬镳</br>        刀与枪</br>        南蛮船</br>        教徒武士</br>        黑夜风暴</br>        满天云雾</br>        追踪</br>        女儿心</br>        南行</br>        熊本</br>        岩户观音</br>        暗流</br>        围剿</br>        转进</br>        剑圣藏人佐</br>        纤月古城</br>        山雨之卷</br>        剑与土</br>        四浦乡</br>        人身供奉</br>        丸</br>        逆风</br>        山灵</br>        密使</br>        秋风</br>        骚动</br>        妖魔</br>        心照不宣</br>        狂飙</br>        届期</br>        山雨</br>        荒野</br>        迷路</br>        剧变</br>        复活</br>        岁月如流</br>        江户之卷</br>        天外天</br>        浪人馆</br>        伊织</br>        旋涡</br>        因缘际会</br>        江户城</br>        扑火飞蛾</br>        万里一空</br>        京寓</br>        宿缘</br>        幽居</br>        岛原之卷</br>        焰之窗</br>        鬼百合</br>        熊本冷风</br>        灾厄</br>        爆发</br>        出兵</br>        十字旗</br>        谋略</br>        穷鼠啮猫</br>        总攻击</br>        和平曙光</br>        五人团</br>        主水邸宅</br>        病床</br>        熊本之卷</br>        清扫</br>        洁净</br>        醺风</br>        流云</br>        武藏来也</br>        花馆</br>        女人</br>        惺惺相惜</br>        士道</br>        鸣动</br>        败北</br>        巨星陨落</br>        新风</br>        梅雨晴天</br>        风流道士</br>        天命之卷</br>        光与音</br>        阿部一族</br>        征讨</br>        岩殿山</br>        去来</br>        同行二人</br>        剑与禅</br>        悲剧之日</br>        情与理</br>        落花</br>        第四个女人</br>        佛敌</br>        阿松自尽</br>        观音</br>        五轮书</br>        转法轮</br>        去世</br>     · · · · · ·     (收起)",
  "read": {
    "reading": 14,
    "readed": 31,
    "want_read": 422
  }
}
```


#### 问题

-  不适合大规模的数据采集,请温柔的对待这个程序
-  如果是增量数据可以使用这个程序查询


